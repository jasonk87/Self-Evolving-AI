<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant Interface</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="sci-fi-container">
        <header>
            <h1>A.I. ASSISTANT // WEIBO</h1>
        </header>

        <div class="main-content">
            <div id="projectDisplayArea" class="project-display-area">
                <iframe id="projectDisplayIframe" srcdoc="<p style='padding: 10px; color: #ccc;'>Interactive Project Area - Your web projects will appear here.</p>" sandbox="allow-scripts allow-same-origin" style="width:100%; height:100%; border:none;"></iframe>
                <div class="project-controls">
                    <button id="pauseBtn" title="Pause Project Content">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18px" height="18px">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                        </svg>
                    </button>
                    <button id="resumeBtn" title="Resume Project Content" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18px" height="18px">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                    <button id="analyzeDisplayBtn" title="Analyze Displayed Content">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18px" height="18px">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v2h-2zm0 4h2v6h-2z"/>
                        </svg>
                    </button>
                    <button id="fullscreenToggleBtn" title="Toggle Fullscreen">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18px" height="18px" class="icon-fullscreen-enter"> <!-- Adjusted size for consistency -->
                            <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18px" height="18px" class="icon-fullscreen-exit" style="display:none;"> <!-- Adjusted size -->
                            <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
                        </svg>
                    </button>
                    <button id="toggleProjectDisplayBtn" title="Toggle Project Display Area">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18px" height="18px">
                            <path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM5 7h2v2H5zm4 0h2v2H9zm4 0h2v2h-2z"/> <!-- Simple 'window' like icon -->
                        </svg>
                    </button>
                </div>
            </div>
            <div class="ai-core-display" id="aiCoreDisplay">
                <div class="processing-indicator" id="processingIndicator">
                    <div class="orb main-orb"></div>
                    <div class="orb satellite-orb s1"></div>
                    <div class="orb satellite-orb s2"></div>
                    <div class="orb satellite-orb s3"></div>
                    <div class="orb satellite-orb s4"></div>
                </div>
                <div id="matrixScrollEffect" class="matrix-scroll-effect" style="display:none;"></div>
                <p id="aiCoreStatusText">AI Core Systems Nominal</p>
            </div>

            <div class="chat-log-area" id="chatLogArea">
                 <div class="message ai-message">Initializing holographic interface... Stand by.</div>
            </div>
        </div>

        <div class="input-area-sci-fi">
            <button id="helpButton" class="help-btn" title="Help & Commands">?</button>
            <input type="text" id="userInput" placeholder="Transmit directive..." autofocus>
            <button id="sendButton">Send</button>
        </div>

        <div id="statusPanel" class="status-panel collapsed">
            <button id="statusPanelToggle" class="status-panel-toggle">&lt;</button>
            <div class="status-panel-content">
                <div class="status-section" id="activeTasksSection">
                    <h4>Active Tasks <button id="refreshActiveTasksBtn" class="refresh-btn" title="Refresh Tasks">ðŸ”„</button></h4>
                    <ul id="activeTasksList"><li>(No tasks currently active)</li></ul>
                </div>
                <div class="status-section" id="recentNotificationsSection">
                    <h4>Recent Notifications <button id="refreshNotificationsBtn" class="refresh-btn" title="Refresh Notifications">ðŸ”„</button></h4>
                    <ul id="recentNotificationsList"><li>(No new notifications)</li></ul>
                </div>
                <!-- Add more sections later: AI Goal, System Load, etc. -->
            </div>
        </div>
    </div>

    <div id="helpMenuPopup" class="help-menu-popup" style="display:none;">
        <div class="help-menu-header">Available Commands</div>
        <div class="help-menu-content">
            <div class="help-menu-category">
                <span class="category-title">Suggestions</span>
                <ul class="help-menu-items">
                    <li data-command="/suggestions list pending" title="View pending suggestions">List Pending</li>
                    <li data-command="/suggestions list all" title="View all suggestions">List All</li>
                    <li data-command="/suggestions approve " data-placeholder="<ID> [reason]" title="Approve a suggestion: /suggestions approve <ID> [reason]">Approve ID...</li>
                    <li data-command="/suggestions deny " data-placeholder="<ID> [reason]" title="Deny a suggestion: /suggestions deny <ID> [reason]">Deny ID...</li>
                    <li data-command="/suggestions status" title="Show summary status of suggestions">Summary Status</li>
                </ul>
            </div>
            <div class="help-menu-category">
                <span class="category-title">Tasks</span>
                <ul class="help-menu-items">
                    <li data-command="/tasks list" title="Show summary of active and archived tasks">Task Summary</li>
                    <li data-command="/task_plan " data-placeholder="<task_ID>" title="Display plan for a task: /task_plan <task_ID>">View Task Plan...</li>
                </ul>
            </div>
            <div class="help-menu-category">
                <span class="category-title">System</span>
                <ul class="help-menu-items">
                    <li data-help-action="displayInfo" data-info-text="To see the system status, type '/status' in the chat and send." title="Display info about system status command">System Status Info</li>
                    <li data-command="/notifications list unread" data-help-action="populateInput" title="Pre-fill command to list unread notifications">List Unread Notifications</li>
                    <li data-help-action="displayInfo" data-info-text="You can type various commands like '/status', '/tasks list', '/suggestions list pending', etc. For a more comprehensive list, type '/help' and send it to the AI." title="General help about commands">General Command Help</li>
                    <li data-command="/help" data-help-action="populateInput" title="Pre-fill /help command to get full list from AI">Full Help (from AI)</li>
                </ul>
            </div>
            <div class="help-menu-category">
                <span class="category-title">Display</span>
                <ul class="help-menu-items">
                    <li data-command="/toggle_project_display" title="Show/Hide the Project Display Area">Toggle Project Display</li>
                </ul>
            </div>
             <!-- Add /tools, /projects later if needed -->
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}" defer></script>
</body>
</html>
